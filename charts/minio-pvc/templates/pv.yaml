# https://github.com/yandex-cloud/k8s-csi-s3/blob/f4d01e12c7e69deea40af7794a1bd6b7e78c97b7/deploy/kubernetes/examples/pvc-manual.yaml
apiVersion: v1
kind: PersistentVolume
metadata:
  name: "{{ .Release.Name }}"
spec:
  storageClassName: csi-s3
  capacity:
    storage: "{{ .Values.size }}"
  accessModes:
    - ReadWriteMany
  claimRef:
    name: "{{ .Release.Name }}"
    namespace: "{{ .Release.Namespace }}"
  csi:
    driver: ru.yandex.s3.csi
    controllerPublishSecretRef:
      name: "{{ .Values.csi.secret }}"
      namespace: "{{ .Values.csi.namespace }}"
    nodePublishSecretRef:
      name: "{{ .Values.csi.secret }}"
      namespace: "{{ .Values.csi.namespace }}"
    nodeStageSecretRef:
      name: "{{ .Values.csi.secret }}"
      namespace: "{{ .Values.csi.namespace }}"
    volumeAttributes:
      capacity: "{{ .Values.size }}"
      mounter: geesefs
    volumeHandle: "{{ .Values.path }}"
