apiVersion: v1
kind: Secret
metadata:
  name: "{{ .Release.Name }}-env"
  labels:
    {{- include "common.labels.standard" . | nindent 4 }}
type: Opaque
stringData:
  {{- with .Values.listen }}
  KARABERUS_LISTEN_HOST: "{{ .host }}"
  KARABERUS_LISTEN_PORT: "{{ .port }}"
  {{- end }}
  {{- with .Values.oidc }}
  KARABERUS_OIDC_ISSUER: "{{ .issuer }}"
  KARABERUS_OIDC_KEY_ID: "{{ .keyId }}"
  KARABERUS_OIDC_KEY: "{{ .key }}"
  KARABERUS_OIDC_ID_CLAIM: "{{ .idClaim }}"
  KARABERUS_OIDC_CLIENT_ID: "{{ .clientId }}"
  {{- end }}
  {{- with .Values.s3 }}
  KARABERUS_S3_ENDPOINT: "{{ .endpoint }}"
  KARABERUS_S3_KEYID: "{{ .keyId }}"
  KARABERUS_S3_SECRET: "{{ .secret }}"
  KARABERUS_S3_SECURE: "{{ .secure }}"
  KARABERUS_S3_BUCKET_NAME: "{{ .bucketName }}"
  {{- end }}
  {{- with .Values.db }}
  KARABERUS_DB_DRIVER: "{{ .driver }}"
  KARABERUS_DB_DSN: "{{ .dsn }}"
  KARABERUS_DB_FILE: "{{ .file }}"
  {{- end }}
