environments:
  default:
    secrets:
      - ../globals.sops.yaml
---
repositories:
  - name: kubernetes-dashboard
    url: https://kubernetes.github.io/dashboard/

releases:
  - name: kubernetes-dashboard
    chart: kubernetes-dashboard/kubernetes-dashboard
    version: 7.0.0
    values:
      - api:
          scaling:
            replicas: 1
      - app:
          ingress:
            enabled: true
            useDefaultIngressClass: true
            hosts:
              - dash.{{ .Values.domain }}
            useDefaultAnnotations: false
            annotations:
              traefik.ingress.kubernetes.io/router.entrypoints: websecure
            issuer:
              scope: cluster
              name: letsencrypt
            secretName: dash.{{ .Values.domain }}-tls
  - name: kubernetes-dashboard-extras
    chart: ../../charts/kubernetes-dashboard-extras
