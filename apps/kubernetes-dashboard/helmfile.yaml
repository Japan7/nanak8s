environments:
  default:
    secrets:
      - ../globals.sops.yaml
---
repositories:
  - name: kubernetes-dashboard
    url: https://kubernetes.github.io/dashboard/

releases:
  - name: kubernetes-dashboard
    chart: kubernetes-dashboard/kubernetes-dashboard
    version: 7.3.1
    values:
      - metricsScraper:
          enabled: true
      - ingress:
          enabled: true
          hosts:
            - dash.{{ .Values.domain }}
          annotations:
            traefik.ingress.kubernetes.io/router.entrypoints: websecure
            cert-manager.io/cluster-issuer: letsencrypt
          tls:
            - hosts:
                - dash.{{ .Values.domain }}
              secretName: dash.{{ .Values.domain }}-tls
  - name: kubernetes-dashboard-extras
    chart: ../../charts/kubernetes-dashboard-extras
