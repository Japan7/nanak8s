environments:
  prod:
    values:
      - tag: 2023.04.19
      - replicas: 2
      - tasks: true
      - dumps: true
      - affinity:
          nodeAffinity:
            preferredDuringSchedulingIgnoredDuringExecution:
              - weight: 1
                preference:
                  matchExpressions:
                    - key: topology.kubernetes.io/region
                      operator: In
                      values:
                        - eu-west
    secrets:
      - ../globals.sops.yaml
      - prod.sops.yaml
  staging:
    values:
      - tag: sha-9b29ab5
      - replicas: 1
      - tasks: false
      - dumps: false
      - affinity: {}
    secrets:
      - ../globals.sops.yaml
      - staging.sops.yaml
  dev:
    values:
      - tag: latest
      - replicas: 1
      - tasks: false
      - dumps: false
      - affinity: {}
    secrets:
      - ../globals.sops.yaml
      - dev.sops.yaml
